generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model access {
  id         BigInt      @id @default(autoincrement()) @db.UnsignedBigInt
  name       String      @db.VarChar(255)
  created_at DateTime    @default(now())
  deleted_at DateTime?
  updated_at DateTime    @updatedAt
  characters character[]
  area       area[]

  @@map("accesses")
}

model setting_level {
  id             BigInt        @id @default(autoincrement()) @db.UnsignedBigInt
  health         BigInt        @db.UnsignedBigInt
  mana           BigInt        @db.UnsignedBigInt
  req_experience BigInt        @db.UnsignedBigInt
  created_at     DateTime      @default(now())
  deleted_at     DateTime?
  updated_at     DateTime      @updatedAt
  characters     character[]
  areas          area[]
  enhancement    enhancement[]

  @@map("settings_levels")
}

model server {
  id          BigInt      @id @default(autoincrement()) @db.UnsignedBigInt
  name        String      @db.VarChar(255)
  host        String      @db.VarChar(255)
  port        BigInt      @db.UnsignedBigInt
  cap_players BigInt      @db.UnsignedBigInt
  created_at  DateTime    @default(now())
  deleted_at  DateTime?
  updated_at  DateTime    @updatedAt
  characters  character[]

  @@map("servers")
}

model hair {
  id         BigInt      @id @default(autoincrement()) @db.UnsignedBigInt
  gender     Gender
  name       String      @db.VarChar(255)
  file       String      @db.VarChar(255)
  created_at DateTime    @default(now())
  deleted_at DateTime?
  updated_at DateTime    @updatedAt
  characters character[]

  @@map("hairs")
}

model guild {
  id         BigInt      @id @default(autoincrement()) @db.UnsignedBigInt
  name       String      @db.VarChar(255)
  created_at DateTime    @default(now())
  deleted_at DateTime?
  updated_at DateTime    @updatedAt
  characters character[]

  @@map("guilds")
}

model area {
  id            BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  req_level_id  BigInt    @db.UnsignedBigInt
  req_access_id BigInt    @db.UnsignedBigInt
  name          String    @db.VarChar(255)
  file          String    @db.VarChar(64)
  max_players   BigInt    @db.UnsignedBigInt
  is_upgrade    Boolean
  is_staff      Boolean
  is_pvp        Boolean
  created_at    DateTime  @default(now())
  deleted_at    DateTime?
  updated_at    DateTime  @updatedAt

  req_level    setting_level  @relation(fields: [req_level_id], references: [id])
  req_access   access         @relation(fields: [req_access_id], references: [id])
  cells        area_cell[]
  area_item    area_item[]
  area_monster area_monster[]

  @@index([req_level_id], map: "req_level_id")
  @@index([req_access_id], map: "req_access_id")
  @@map("areas")
}

model area_cell {
  id         BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  area_id    BigInt    @db.UnsignedBigInt
  cell_id    BigInt    @db.UnsignedBigInt
  frame      String    @db.VarChar(32)
  pad        String    @db.VarChar(32)
  created_at DateTime  @default(now())
  deleted_at DateTime?
  updated_at DateTime  @updatedAt

  area area @relation(fields: [area_id], references: [id])

  @@index([area_id], map: "area_id")
  @@map("areas_cells")
}

model area_item {
  id         BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  area_id    BigInt    @db.UnsignedBigInt
  item_id    BigInt    @db.UnsignedBigInt
  created_at DateTime  @default(now())
  deleted_at DateTime?
  updated_at DateTime  @updatedAt

  area area @relation(fields: [area_id], references: [id])
  // TODO:
  // item item @relation(fields: [item_id], references: [id])
  // @@index([item_id], map: "item_id")

  @@index([area_id], map: "area_id")
  @@map("areas_items")
}

model area_monster {
  id            BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  area_id       BigInt    @db.UnsignedBigInt
  monster_id    BigInt    @db.UnsignedBigInt
  area_mon_id   BigInt    @db.UnsignedBigInt
  frame         String    @db.VarChar(32)
  is_aggressive Boolean
  created_at    DateTime  @default(now())
  deleted_at    DateTime?
  updated_at    DateTime  @updatedAt

  area area @relation(fields: [area_id], references: [id])
  // TODO:
  // monster monster @relation(fields: [monster_id], references: [id])
  // @@index([monster_id], map: "monster_id")

  @@index([area_id], map: "area_id")
  @@map("areas_monsters")
}

model job {
  id                        BigInt        @id @default(autoincrement()) @db.UnsignedBigInt
  category                  Category
  description               String        @db.VarChar(255)
  mana_regeneration_methods String        @db.VarChar(255)
  stats_description         String        @db.VarChar(255)
  created_at                DateTime      @default(now())
  deleted_at                DateTime?
  updated_at                DateTime      @updatedAt
  job_skill                 job_skill[]

  @@map("jobs")
}

model job_skill {
  id         BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  job_id     BigInt    @db.UnsignedBigInt
  skill_id   BigInt    @db.UnsignedBigInt
  created_at DateTime  @default(now())
  deleted_at DateTime?
  updated_at DateTime  @updatedAt

  job job @relation(fields: [job_id], references: [id])
  // TODO:
  // skill skill @relation(fields: [skill_id], references: [id])
  // @@index([skill_id], map: "skill_id")

  @@index([job_id], map: "job_id")
  @@map("jobs_skills")
}

model enhancement {
  id         BigInt    @id @default(autoincrement()) @db.UnsignedBigInt
  level_id   BigInt    @db.UnsignedBigInt
  pattern_id BigInt    @db.UnsignedBigInt
  rarity     BigInt    @db.UnsignedBigInt
  dps        BigInt    @db.UnsignedBigInt
  created_at DateTime  @default(now())
  deleted_at DateTime?
  updated_at DateTime  @updatedAt

  level   setting_level       @relation(fields: [level_id], references: [id])
  pattern enhancement_pattern @relation(fields: [pattern_id], references: [id])

  @@index([level_id], map: "level_id")
  @@index([pattern_id], map: "pattern_id")
  @@map("enhancements")
}

model enhancement_pattern {
  id           BigInt        @id @default(autoincrement()) @db.UnsignedBigInt
  category     Category
  wisdom       BigInt        @db.UnsignedBigInt
  strength     BigInt        @db.UnsignedBigInt
  luck         BigInt        @db.UnsignedBigInt
  dexterity    BigInt        @db.UnsignedBigInt
  endurance    BigInt        @db.UnsignedBigInt
  inteliigence BigInt        @db.UnsignedBigInt
  created_at   DateTime      @default(now())
  deleted_at   DateTime?
  updated_at   DateTime      @updatedAt
  enhancement  enhancement[]

  @@map("enhancements_pattern")
}

model character {
  id                BigInt        @id @default(autoincrement()) @db.UnsignedBigInt
  access_id         BigInt        @db.UnsignedBigInt
  level_id          BigInt        @db.UnsignedBigInt
  server_id         BigInt        @db.UnsignedBigInt
  hair_id           BigInt        @db.UnsignedBigInt
  guild_id          BigInt?       @db.UnsignedBigInt
  guild_rank        BigInt        @db.UnsignedBigInt
  name              String        @db.VarChar(255)
  gender            Gender
  coins             BigInt        @db.UnsignedBigInt
  gold              BigInt        @db.UnsignedBigInt
  experience        BigInt        @db.UnsignedBigInt
  activation_flag   BigInt        @db.UnsignedBigInt
  slots_bag         BigInt        @db.UnsignedBigInt
  slots_bank        BigInt        @db.UnsignedBigInt
  slots_house       BigInt        @db.UnsignedBigInt
  color_skin        String        @db.VarChar(6)
  color_eye         String        @db.VarChar(6)
  color_hair        String        @db.VarChar(6)
  color_base        String        @db.VarChar(6)
  color_trim        String        @db.VarChar(6)
  color_accessory   String        @db.VarChar(6)
  area_last         String        @db.VarChar(64)
  area_current      String        @db.VarChar(64)
  quests_1          String        @db.VarChar(255)
  quests_2          String        @db.VarChar(255)
  quests_3          String        @db.VarChar(255)
  quests_4          String        @db.VarChar(255)
  quests_5          String        @db.VarChar(255)
  quests_6          String        @db.VarChar(255)
  is_permanent_mute Boolean
  created_at        DateTime      @default(now())
  updated_at        DateTime      @updatedAt
  deleted_at        DateTime?
  access            access        @relation(fields: [access_id], references: [id])
  guild             guild?        @relation(fields: [guild_id], references: [id])
  hair              hair          @relation(fields: [hair_id], references: [id])
  level             setting_level @relation(fields: [level_id], references: [id])
  server            server        @relation(fields: [server_id], references: [id])

  @@index([access_id], map: "access_id")
  @@index([level_id], map: "level_id")
  @@index([server_id], map: "server_id")
  @@index([hair_id], map: "hair_id")
  @@index([guild_id], map: "guild_id")
  @@map("characters")
}

enum Gender {
  M
  F
}

enum Category {
  M1
  M2
  M3
  M4
  C1
  C2
  C3
  S1
}
